[TOC]

# 3.5 组合逻辑控制器

## 1.组合逻辑控制器的时序系统

依靠不同的事件标志，让CPU分步工作，通常采用**工作周期、时钟周期和工作脉冲**三级时序。

> 工作周期 > 时钟周期 > 工作脉冲

### （1）工作周期划分

$$
\left.
\begin{array}{r}
取指周期FT
\\原周期ST
\\目的周期DT
\\执行周期ET
\end{array}
\right\}
用于指令正常执行
$$

$$
\left.
\begin{array}{r}
中断周期IT
\\DMA周期DMAT
\end{array}
\right\}
$$

#### 1）取指周期（FT）

**从M取出指令并译码，修改PC。** ——公共操作

#### 2）源周期（ST）

**按寻址方式（非R寻址）形成源地址，==从M取出==源操作数暂存于C。**

#### 3）目的周期（DT）

**按寻址方式（非R寻址）形成目的地址，或从M取出目的操作数，暂存于D。**

#### 4）执行周期（ET）

**按操作码完成相应操作（传送、运算、取转移地址送入PC、返回地址压栈保存）；==后续指令地址送入MAR==**

### （2）时钟周期（节拍）T

#### 1）时钟周期时间：**1微秒**

完成一步操作：
$$
\left\{
\begin{array}{l}
一次从M读出，并经数据通路传送的操作；或
\\一次数据通路传送操作；或
\\一次向M写入的操作
\end{array}
\right.
$$

模型机以**访存时间**作为**一步操作时间**

**设置一个总线周期的长度**等于**一个时钟周期**，可根据需要扩展。

#### 2）时钟周期数：

定义：一个工作周期中的时钟数**可变**
$$
用计数器T控制节拍数
\left\{
\begin{array}{l}
每个工作周期第一拍T=0
\\每开始一个新节拍T计数
\\工作周期结束时T清0
\end{array}
\right.
$$

将计数值译码，可产生节拍电位。

#### 3）工作脉冲P：

**每个==时钟周期==结束时设置一个脉冲**

![image-20221019174251112](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/img/image-20221019174251112.png)

## 2.CPU控制流程

![image-20221019174317682](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/img/image-20221019174317682.png)

## 3.指令流程图与操作时间表

**拟定指令流程：**确定各工作周期中每拍完成的具体操作（寄存器传送级）。

**列操作时间表：**列出每一步操作所需的微命令及产生条件。

### （1）取指周期FT

#### 1）进入FT的方式 

初始化时置入FT

程序正常运行时同步打入FT。

#### 2）流程图

**FTO:** M $\to$ IR

​		 PC+1 $\to$ PC

#### 3）操作时间表

![image-20221019174801790](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/img/image-20221019174801790.png)

工作周期中，每节拍结束时发CPT；工作周期结束时==5（CPFT,CPST,CPDT,CPET,CPT)个==时序

### （2）传送指令

#### 1）流程图

![image-20221019174923115](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/img/image-20221019174923115.png)
