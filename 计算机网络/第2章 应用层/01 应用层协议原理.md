# 一些网络应用
- 电子邮件
- Web
- 即时讯息
- 远程登陆
- P2P文件共享 ^e75ee5
- 多用户网络游戏
- 流式存储视频片段
- 因特网电话
- 实时视频会议
- 在两台计算机之间的两个账户之间的文件传输
# 研发网络应用程序
## 研发网络应用程序的核心
- 写出能够运行在不同的端系统并通过网络彼此通信的程序（例如：Web：Web服务器软件和浏览器软件通信）
## 没有应用程序软件运行在网络核心设备上
- 网络核心设备不在应用层起作用（这种设计方法促进了应用程序的研发）
# 网络应用程序体系结构
客户机/服务器体系结构
P2P体系结构
客户机/服务器和P2P混合的体系结构
# 客户机/服务器体系结构
## 服务器
- 总是打开的主机
- 具有固定的、众所周知的IP地址
- 主机群集常被用于创建强大的虚拟服务器
## 客户机
- 同服务器端通信
- 可以间断地同服务器连接
- 可以拥有动态IP地址
- 客户机相互之间不直接通信
# 纯P2P体系结构
- 没有总是打开的服务器
- 任意一对主机直接相互通信
- 对等方间歇连接并且可以改变IP地址
例如：Gnutella
**优点：自扩展性**
**缺点：难以管理**
# 客户机/服务器 和 P2P混合的体系结构
![image.png](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/obsidian/202303231918580.png)
# 进程通信
- **进程：运行在端系统中的程序**
- 同一主机上的两个进程通过内部进程通信机制进行通信
- 不同主机上的进程通过交换报文相互通信
 **客户进程**：发起通信的进程
 **服务器进程**：等待联系的进程
- **注意：具有P2P体系结构的应用程序既有客户进程又有服务器进程。**
# 进程与计算机网络的接口——套接字
**套接字又叫做应用程序编程接口（API）**
用户通过API对传输层的控制仅限于：
- **选择传输协议**
- **设定几个参数**
进程通过它的套接字在网络上发送和接收报文
套接字类比于**门户**
- 发送进程把报文推出门户
- 发送进程假定门户到另外一侧之间有运输设施，该设施可以传送报文到接收进程
![image.png](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/obsidian/202303231922821.png)
# 进程寻址
主机上的进程可以有多个，网络中有多个主机，每个主机上有多个进程。
为了一个进程能接收报文，它需要一个标识
主机有唯一的32位IP地址
**问：主机的IP地址足够标识进程吗？
答：不能。因为一台主机上能够运行许多进程。**
**主机上的进程标识包括：IP地址和端口号**
常用应用程序的端口号：
Web服务：80
邮件服务：25	
将在第三章详细分析端口号
# 一个应用层协议定义了：
**交换的报文 (messages) 类型**
- 如请求报文、应答报文
**报文类型的语法**
- 报文中的各个字段及其详细描述
**报文语义**
- 即包含在字段中的信息的含义
**规则**
- 进程何时、如何发送报文及对报文进行响应
>**公共领域协议**
>由RFC文档定义
>可供大家使用
>例如：HTTP，SMTP
>**专用协议**
>例如： KaZaA，zoom，Skype等
# 一个应用需要什么样的传输服务？
**数据完整性**
一些应用 （如：实时音频）能容忍一定程度的数据丢失
另一些应用（如：文件传输，telnet）需要100％可靠的数据传输
**定时**
一些应用（如：因特网电话、多方游戏）要求低时延
**带宽和吞吐量**
一些应用（如：多媒体）必须要达到所需带宽
另一些应用（弹性应用）根据需要充分利用可供使用的带宽
**安全**
加密，数据完整性等
# 常见应用的传输服务需求
![image.png](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/obsidian/202303231928500.png)
# 因特网运输协议提供的服务
## TCP服务
**面向连接的服务：** 在客户机程序和服务器程序之间必须建立连接
**可靠的传输服务：** 接收和发送进程间
**流量控制:** 发送方不会淹没接收方
**拥塞控制:** 网络出现拥塞时抑制发送进程
**没有提供：** 时延保证，最小带宽保证，安全性
## UDP 服务
**不可靠数据传输**
**没有提供：** 建立连接，可靠性，流量控制，拥塞控制，时延和带宽保证
# 服务器进程工作方式
**循环方式(iterative mode)**
- 一次只运行**一个服务进程**
- 当有多个客户进程请求服务时，服务进程就按**请求的先后顺序**依次做出响应 ==(阻塞方式)==
**并发方式(concurrent mode)**
- 可以同时运行**多个服务进程**
- 每一个服务进程都对某个特定的客户进程做出响应 ==(非阻塞方式)==
**无连接循环方式服务：**
使用**无连接的UDP服务**进程通常都工作在**循环方式**，即一个服务进程在**同一时间**只能向**一个客户进程**提供服务。(**顺序服务**)
- 服务进程收到客户进程的请求后，就发送**UDP用户数据报**响应该客户
- 对其他客户进程发来的请求则**暂时**不予理睬，这些请求都在服务端的队列中**排队**等候服务进程的处理
- 当服务进程处理完毕一个请求时，就从队列中读取来自下一个客户进程的请求，然后继续处理
![image.png](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/obsidian/202303231934676.png)
**面向连接的并发方式服务：**
- **面向连接的TCP服务**进程通常都工作在**并发服务**方式，服务进程在同一时间可同时向**多个客户进程**提供服务。(**并发服务**)
- 在TCP服务进程与多个客户进程之间必须建立多条TCP连接，每条TCP连接在其数据传送完毕后释放
- **一个TCP连接对应一个（熟知）服务端口**
- 主服务进程在**熟知端口**等待客户进程发出的请求。一旦收到客户的请求，就创建一个**从属服务进程**，并指明从属服务进程使用**临时套接字**与该客户建立TCP连接，然后主服务进程继续在原来的熟知端口等待向其他客户提供服务
![image.png](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/obsidian/202303231936982.png)
# 因特网应用：应用层协议，传输协议
![image.png](https://picgo-1310230783.cos.ap-chengdu.myqcloud.com/obsidian/202303231937179.png)
# 安全TCP
## TCP和UDP
没有加密
网络明文传输，如用户名和口令信息等
## SSL（Security Socket Layer）
提供加密的TCP连接
保证数据完整性
端点认证
## SSL在应用层
应用使用SSL库调用TCP服务接口
SSL提供套接字API